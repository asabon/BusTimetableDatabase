---
description: 既存の GitHub Issue を更新する手順
---

# GitHub Issue 更新ワークフロー

このワークフローは、既存の GitHub Issue を更新する際の手順を定義します。

## 前提条件
- 既存の Issue 番号が判明している
- Issue の内容を更新する必要がある（進捗更新、計画変更など）

## 手順

### 1. 既存 Issue の内容を確認する
ユーザーに Issue の現在の内容を確認：
- 「Issue #XXX の現在の内容を教えていただけますか？」
- または、`gh issue view XXX` コマンドの実行を提案

### 2. 更新内容を決定する
以下のいずれかまたは複数：

#### a) タスクチェックリストの進捗更新
- 完了したタスクを `[x]` にマーク
- 新たに開始したタスクを `[/]` にマーク（カスタム記法）
- 新しいタスクを追加

#### b) 実装計画の更新
- 新たに判明した変更内容を追加
- 不要になった変更を削除または取り消し線で表示
- ユーザーレビューが必要な事項を追加

#### c) 検証計画の更新
- 実施済みのテスト結果を記録
- 新たなテスト項目を追加

### 3. 更新内容を整理する
Issue 本文全体を再構成し、以下を確認：
- フォーマットが `.github/ISSUE_TEMPLATE/task_tracking.md` に準拠しているか
- タスク ID が連番になっているか
- マークダウンの構文が正しいか

### 4. ユーザーに更新内容を提示する
以下の形式で更新内容を提示：

```markdown
Issue #XXX の更新内容：

## 変更点
- タスク X を完了としてマーク
- 新しいサブタスク Y を追加
- 実装計画に Z を追加

## 更新後の Issue 本文
[更新後の全文を表示]

この内容で Issue を更新してよろしいですか？
```

### 5. Issue を更新する
必ず `gh issue edit` に `--body-file` を組み合わせて使用すること。

```bash
gh issue edit <Issue番号> --body-file issue_body.md
```

### 6. 一時ファイルの削除
更新完了後、作成した一時ファイルを削除する。

### 7. 進捗状況を記録
更新した内容を記録し、次回の作業時に参照できるようにする

## 注意事項

### タスクチェックリストの更新
- 既存のタスク ID は変更しない
- 新しいタスクには次の連番を付与
- 完了したタスクは削除せず、`[x]` でマークする

### 実装計画の変更
- 大きな変更がある場合は、ユーザーに理由を説明する
- 当初の計画と異なる場合は、その旨を明記

### コメントの活用
- Issue 本文の更新だけでなく、必要に応じてコメントで進捗を報告することも検討
- 重要な決定事項はコメントで記録

### PR のマージ
- PR の作成は AI が行ってもよいが、マージは必ずユーザーが行う
- AI は PR のマージを実行してはならない
- PR 作成後は、ユーザーにレビューとマージを依頼する

## 出力例

```markdown
Issue #42 を以下のように更新します：

## 変更点
- タスク 0「プロジェクト構造の調査」を完了としてマーク
- タスク 1「スクリプトの実装」を進行中としてマーク
- 検証計画に「pytest でのカバレッジ確認」を追加

## 更新後の Issue 本文
[更新後の全文]

更新内容を `issue_body.md` に保存しました。
以下のコマンドで Issue を更新できます：

```bash
gh issue edit 42 --body-file issue_body.md
```

または、GitHub Web UI から手動で編集してください。
```
