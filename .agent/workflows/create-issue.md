---
description: GitHub Issue を新規作成する手順
---

# /create-issue ワークフロー

このワークフローは、新しいタスクに対して GitHub Issue を作成する際の手順を定義します。

## 前提条件
- ユーザーから新しいタスクの指示を受けている
- 関連する既存 Issue が存在しないことを確認済み

## 手順

### 1. タスクの内容を理解する
ユーザーの指示から以下を明確にする：
- タスクの目的と背景
- 期待される成果物
- 影響範囲

### 2. Issue 本文を作成する
`.github/ISSUE_TEMPLATE/task_tracking.md` のテンプレートに従って、以下のセクションを埋める：

#### 概要 (Goal Description)
- タスクの目的、背景、達成したいことを簡潔に記述

#### 実装計画 (Implementation Plan)

**ユーザーレビューが必要な事項 (User Review Required)**
- 破壊的変更
- 重要な設計上の決定事項
- ユーザーの確認が必要な事項

**提案される変更 (Proposed Changes)**
- コンポーネント別に整理
- 各ファイルの変更内容を記載
- `[MODIFY]`, `[NEW]`, `[DELETE]` のプレフィックスを使用

#### 検証計画 (Verification Plan)

**自動テスト (Automated Tests)**
- 実行するテストコマンド（例: `pytest test/`）
- カバレッジ確認コマンド

**手動検証 (Manual Verification)**
- 手動で確認すべき項目

#### タスク (Tasks)
- チェックリスト形式で作業ステップを記載
- 各タスクに `<!-- id: X -->` コメントを付与
- サブタスクは適切にインデント

### 3. ユーザーに確認する
作成した Issue 本文をユーザーに提示し、以下を確認：
- 内容が正しいか
- Issue を作成してよいか
- タイトルは適切か

### 4. Issue 本文をファイルに保存する
本文を一時ファイル（例: `issue_body.md`）に保存する。

### 5. Issue を作成する
ユーザーの許可を得た後、Antigravity が `gh` CLI を使用して Issue を作成する。エスケープシーケンスや文字化けを防ぐため、必ず `--body-file` を使用すること。

```bash
gh issue create --title "タイトル" --body-file issue_body.md
```

### 6. 一時ファイルの削除
Issue 作成完了後、作成した一時ファイルを削除し、ユーザーに作成された Issue 番号を報告する。

### 7. Issue 番号を記録
作成された Issue 番号を記録し、今後の作業で参照できるようにする

### 6. PR 作成後の対応
作業完了後に PR を作成した場合：
- PR のレビューとマージはユーザーが行う
- AI は PR のマージを実行しない
- ユーザーに PR のレビューとマージを依頼する

## 出力例

```markdown
以下の内容で GitHub Issue を作成することを提案します：

**タイトル**: [Task] データベース v4 フォーマットの設計

**本文**:
[作成した Issue 本文を表示]

この内容で Issue を作成してよろしいですか？
```
